FROM python:3.6-slim

RUN pip install --upgrade pip pipenv
RUN useradd jarr --create-home --shell /bin/bash --home-dir /jarr --user-group
WORKDIR /jarr
USER jarr
COPY ./Pipfil* /jarr/
RUN pipenv sync
COPY ./jarr/ /jarr/jarr
COPY ./migrations/ /jarr/migrations
COPY ./manager.py /jarr/manager.py
COPY ./*.py /jarr/

COPY example_conf/jarr.json /etc/jarr.json
VOLUME /etc/jarr/
